# 一、进程调度算法模拟
## 1 设计目的
（1）要求学生设计并实现模拟进程调度的算法：时间片轮转及先来先服务。
（2）理解进程控制块的结构。
（3）理解进程运行的并发性。
（4）掌握进程调度算法。
## 2 设计要求
在多道程序运行环境下，进程数目一般多于处理机数目，使得进程要通过竞争来使用处理机。这就要求系统能按某种算法，动态地把处理机分配给就绪队列中的一个进程，使之运行，分配处理机的任务是由进程调度程序完成的。一个进程被创建后，系统为了便于对进程进行管理，将系统中的所有进程按其状态，将其组织成不同的进程队列。于是系统中有运行进程队列、就绪队列和各种事件的进程等待队列。进程调度的功能就是从就绪队列中挑选一个进程到处理机上运行。进程调度的算法有多种，常用的有优先级调度算法、先来先服务算法、时间片轮转算法。
进程是程序在处理机上的执行过程。进程存在的标识是进程控制块（PCB），进程控制块结构如下：
```c
typedef struct node 
{ 
   char name[10];                    /* 进程标识符 */ 
   int prio;                          /* 进程优先数 */ 
   int round;                         /* 进程时间轮转时间片 */ 
   int cputime;                       /* 进程占用 CPU 时间*/ 
   int needtime;                      /* 进程到完成还需要的时间*/ 
   int count;                         /* 计数器*/ 
   char state;                        /* 进程的状态*/ 
   struct node *next                   /*链指针*/ 
}PCB; 
```

系统创建一个进程，就是由系统为某个程序设置一个PCB，用于对该进程进行控制和管理，进程任务完成，由系统收回其PCB，该进程便消亡。每个进程可以有三个状态：运行状态、就绪状态和完成状态。
用C语言、C++或者Java语言编写一个程序实现进程调度的算法，模拟进程调度的过程，加深对进程控制块概念和进程调度算法的理解。
本任务要求完成时间片轮转及先来先服务两个算法。
## 3.时间片轮转算法完成进程的调度
### 3.1设计要求：
（1）进程的调度采用时间片轮转算法。
（2）设计三个链队列，分别用来表示运行队列、就绪队列和完成队列。
（3）用户输入进程标识符以及进程所需的时间，申请空间存放进程 PCB信息。
（4）输出的格式和上面的运行结果分析中的格式相同。
时间片轮转调度，具体做法是调度程序每次把 CPU 分配给就绪队列首进程使用一个时间片。当这个时间片结束时，就强迫一个进程让出处理器，让它排列到就绪队列的尾部，等候下一轮调度。实现这种调度要使用一个间隔时钟。当一个进程开始运行时，就将时间片的值置入间隔时钟内，当发生间隔时钟中断时，就表明该进程连续运行的时间已超过一个规定的时间片。此时，中断处理程序就通知处理器调度进行处理器的切换工作。
### 3.2.时间片轮转算法主要思想：
在计算机中系统将所有的就绪进程按先来先服务的原则排成一个队列，每次调度时，把CPU分配给队首进程，并令其执行一个时间片。时间片的大小从几ms到几百ms。当执行的时间片用完，由一个计时器发出时钟中断请求，调度程序便据此信号来停止该进程的执行，并将它送往就绪队列的末尾；然后再把处理机分配给就绪队列中给定的时间内均能获得一时间片的处理机执行时间。
### 3.3算法的实现
1.数据结构及变量说明
2.完成功能的主要函数
3. 时间片算法主要流程图如下：
4.时间片轮转的主要算法功能及注释：
5.时间片算法运行结果分析如下：

## 4.用先来先服务算法完成进程的调度
### 4.1设计要求：
（1）进程的调度采用先来先服务算法。
（2）设计三个链队列，分别用来表示运行队列、就绪队列和完成队列。
（3）用户输入进程标识符以及进程所需的时间，申请空间存放进程PCB信息。
（4）输出的格式和上面的运行结果分析中的格式相同。
先来先服务：按照进程进入就绪队列的先后次序来分配处理器。先进入就绪队列的进程优先被挑选，运行进程一旦占有处理器将一直运行下去直到运行结束或被阻塞，这是一种非剥夺式调度。
### 4.2先来先服务调度算法主要思想：
此算法既可用于作业调度，也可用于进程调度。当作业调度中采用该算法时，每次调度都是从后备作业队列中选择一个或多个最先进入该队列的作业，将它们调入内存，为它们分配资源，创建进程，然后放入就绪队列。在进程调度中采用FCFS算法时，则每次调度是从就绪队列中选择一个最先进入该队列的进程，为之分配处理机，使之投入运行。该进程一直运行到完成或发生某事件而阻塞后才放弃处理机。
# 三、主存空间的回收与分配
## 1 设计目的
主存是中央处理器能直接存取指令和数据的存储器，能否合理地利用主存，在很大程度上将影响到整个计算机系统的性能。主存分配是指在多道作业和多进程环境下，如何共享主存空间。主存回收是指当作业执行完毕或进程运行结束后将主存空间归还给系统。主存分配与回收的实现是与主存储器的管理方式有关。本次设计主要是为了帮助学生深入理解主存空间的分配与回收的几种算法。
（1）掌握首次适应分配算法（2）掌握最佳适应分配算法（3）掌握最坏适应分配算法
## 2 设计要求
用户提出内存空间请求，系统根据申请者要求，按照首次适应分配算法的分配策略分析内存空间的使用情况，找出能满足请求的空闲区，分给申请者，当程序执行完毕时，系统要收回它所占用的内存空间。建立空闲数据文件，空闲区数据文件包括若干行，每行有两个字段：起始地址、内存块大小（均为整数），各字段以逗号隔开。下面是一个空闲区数据文件的示例：
0，	10 
10，	08 
18，	10 
28，	06 
34，	10 
44，	09 
读取空闲区数据文件，建立空闲区表并在屏幕上显示空闲内存状态，空闲区表记录了可供分配的空闲内存的起始地址和大小，用标志位指出该分区是否是未分配的空闲区。
接收用户的内存申请，格式为：作业名、申请空间的大小。
按照内存分配算法中的一种方法选择一个空闲区，分割并分配，修改空闲区表，填写内存已分配区表（起始地址、长度、标志位），其中标志位的一个作用是指出该区域分配给哪个作业。
进程结束后回收内存。本次设计要求完成如下算法：
（1）设计一个内存分配回收的程序使用首次适应分配算法
（2）设计一个内存分配回收的程序使用最佳适应分配算法
（3）设计一个内存分配回收的程序使用最坏适应分配算法
用户提出内存空间请求，系统根据申请者要求，选择上述算法的一种分配策略分析内存空间的使用情况，找出合适的空闲区，分给申请者，当进程执行完毕时，系统收回它所占用的内存空间。
创建空闲区表：
空闲区表的结构如下：
typedef struct node{ 
int start; 
int length; 
char tag[20]; 
}job; 
# 四、页面置换算法
## 1．题目要求：
设计一个虚拟存储区和内存工作区，编程序演示下述算法的具体实现过程，并计算访问命中率：
要求设计主界面以灵活选择某算法，且以下算法都要实现
1) 先进先出算法(FIFO)：淘汰最先进入内存的页面，即选择在内存中驻留时间最久的页面予以淘汰。
2) 最近最久未使用算法(LRU)：淘汰最近最久未被使用的页面。

## 2．实验目的：
1）用C语言编写FIFO、LRU两种置换算法。
2）熟悉内存分页管理策略。
3）了解页面置换的算法。
4）掌握一般常用的调度算法。
5）根据方案使算法得以模拟实现。
6）锻炼知识的运用能力和实践能力。

## 3．相关知识：
1）虚拟存储器的引入：
   局部性原理：程序在执行时在一较短时间内仅限于某个部分；相应的，它所访问的存储空间也局限于某个区域，它主要表现在以下两个方面：时间局限性和空间局限性。
2）虚拟存储器的定义：
   虚拟存储器是只具有请求调入功能和置换功能，能从逻辑上对内存容量进行扩充的一种存储器系统。
3）虚拟存储器的实现方式：
   分页请求系统，它是在分页系统的基础上，增加了请求调页功能、页面置换功能所形成的页面形式虚拟存储系统。
   请求分段系统，它是在分段系统的基础上，增加了请求调段及分段置换功能后，所形成的段式虚拟存储系统。
4）页面分配：
   	平均分配算法，是将系统中所有可供分配的物理块，平均分配给各个进程。
   按比例分配算法，根据进程的大小按比例分配物理块。
   考虑优先的分配算法，把内存中可供分配的所有物理块分成两部分：一部分按比例地分配给各进程；另一部分则根据个进程的优先权，适当的增加其相应份额后，分配给各进程。
5）页面置换算法：
常用的页面置换算法有OPT、FIFO、LRU、Clock、LFU、PBA等。

## 4．设计思想：
    选择置换算法，先输入所有页面号，为系统分配物理块，依次进行置换：
FIFO基本思想：
是用队列存储内存中的页面，队列的特点是先进先出，与该算法是一致的，所以每当发生缺页时，就从队头删除一页，而从队尾加入缺页。或者借助辅助数组time[mSIZE]记录物理块中对应页面的进入时间，每次需要置换时换出进入时间最小的页面。
LRU基本思想：
是用一维数组page[pSIZE]存储页面号序列，memery[mSIZE]是存储装入物理块中的页面。数组flag[10]标记页面的访问时间。每当使用页面时，刷新访问时间。发生缺页时，就从物理块中页面标记最小的一页，调出该页，换入所缺的页面。
